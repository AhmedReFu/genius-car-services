{"ast":null,"code":"import _asyncToGenerator from\"C:/Ahmed_ReFat/genius-car-services/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Ahmed_ReFat/genius-car-services/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Ahmed_ReFat\\\\genius-car-services\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useRef}from'react';import{Button,Form}from'react-bootstrap';import{useSendPasswordResetEmail,useSignInWithEmailAndPassword}from'react-firebase-hooks/auth';import{Link,useLocation,useNavigate}from'react-router-dom';import auth from'../../../firebase.init';import Loading from'../../Shared/Loading/Loading';import SocialLogin from'../SocialLogin/SocialLogin';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _location$state,_location$state$from;var _useSignInWithEmailAn=useSignInWithEmailAndPassword(auth),_useSignInWithEmailAn2=_slicedToArray(_useSignInWithEmailAn,4),signInWithEmailAndPassword=_useSignInWithEmailAn2[0],user=_useSignInWithEmailAn2[1],loading=_useSignInWithEmailAn2[2],error=_useSignInWithEmailAn2[3];var _useSendPasswordReset=useSendPasswordResetEmail(auth),_useSendPasswordReset2=_slicedToArray(_useSendPasswordReset,2),sendPasswordResetEmail=_useSendPasswordReset2[0],sending=_useSendPasswordReset2[1];var emailRef=useRef('');var passwordRef=useRef('');var navigate=useNavigate();var navigateRegister=function navigateRegister(){navigate('/register');};var resetPassword=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var email;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=emailRef.current.value;if(!email){_context.next=7;break;}_context.next=4;return sendPasswordResetEmail(email);case 4:toast('Sent email');_context.next=8;break;case 7:toast('Enter Your Email');case 8:case\"end\":return _context.stop();}}},_callee);}));return function resetPassword(){return _ref.apply(this,arguments);};}();var location=useLocation();var from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||\"/\";if(loading||sending){return/*#__PURE__*/_jsx(Loading,{});}if(user){navigate(from,{replace:true});}var handleSubmit=function handleSubmit(event){event.preventDefault();var email=emailRef.current.value;var password=passwordRef.current.value;signInWithEmailAndPassword(email,password);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container w-50 mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-primary text-center mt-2\",children:\"Please Login\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:/*#__PURE__*/_jsx(Form.Control,{ref:emailRef,type:\"email\",placeholder:\"Enter email\",required:true})}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:/*#__PURE__*/_jsx(Form.Control,{ref:passwordRef,type:\"password\",placeholder:\"Password\",required:true})}),/*#__PURE__*/_jsx(Button,{variant:\"primary w-50 mx-auto d-block \",type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error===null||error===void 0?void 0:error.message})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"New to Genius car? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary pe-auto text-decoration-none\",onClick:navigateRegister,children:\"Please Register\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Forget Password? \",/*#__PURE__*/_jsx(\"button\",{to:\"\",className:\"btn btn-link text-primary pe-auto text-decoration-none\",onClick:resetPassword,children:\"Reset Password\"})]}),/*#__PURE__*/_jsx(SocialLogin,{}),/*#__PURE__*/_jsx(ToastContainer,{})]});};export default Login;","map":{"version":3,"names":["React","useRef","Button","Form","useSendPasswordResetEmail","useSignInWithEmailAndPassword","Link","useLocation","useNavigate","auth","Loading","SocialLogin","ToastContainer","toast","Login","signInWithEmailAndPassword","user","loading","error","sendPasswordResetEmail","sending","emailRef","passwordRef","navigate","navigateRegister","resetPassword","email","current","value","location","from","state","pathname","replace","handleSubmit","event","preventDefault","password","message"],"sources":["C:/Ahmed_ReFat/genius-car-services/src/Pages/Login/Login/Login.js"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport { Button, Form } from 'react-bootstrap';\r\nimport { useSendPasswordResetEmail, useSignInWithEmailAndPassword } from 'react-firebase-hooks/auth';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport auth from '../../../firebase.init';\r\nimport Loading from '../../Shared/Loading/Loading';\r\nimport SocialLogin from '../SocialLogin/SocialLogin';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nconst Login = () => {\r\n    const [\r\n        signInWithEmailAndPassword,\r\n        user,\r\n        loading,\r\n        error,\r\n    ] = useSignInWithEmailAndPassword(auth);\r\n    const [sendPasswordResetEmail, sending] = useSendPasswordResetEmail(auth);\r\n    const emailRef = useRef('');\r\n    const passwordRef = useRef('');\r\n    const navigate = useNavigate();\r\n    const navigateRegister = () => {\r\n        navigate('/register')\r\n    }\r\n    const resetPassword = async () => {\r\n        const email = emailRef.current.value;\r\n        if (email) {\r\n            await sendPasswordResetEmail(email);\r\n            toast('Sent email')\r\n        }\r\n        else {\r\n            toast('Enter Your Email')\r\n        }\r\n    }\r\n    const location = useLocation();\r\n    const from = location.state?.from?.pathname || \"/\";\r\n    if (loading || sending) {\r\n        return <Loading></Loading>\r\n    }\r\n    if (user) {\r\n        navigate(from, { replace: true });\r\n    }\r\n    const handleSubmit = event => {\r\n        event.preventDefault();\r\n        const email = emailRef.current.value;\r\n        const password = passwordRef.current.value;\r\n\r\n        signInWithEmailAndPassword(email, password);\r\n    }\r\n\r\n    return (\r\n        <div className='container w-50 mx-auto'>\r\n            <h2 className='text-primary text-center mt-2'>Please Login</h2>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                    <Form.Control ref={emailRef} type=\"email\" placeholder=\"Enter email\" required />\r\n                </Form.Group>\r\n\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                    <Form.Control ref={passwordRef} type=\"password\" placeholder=\"Password\" required />\r\n                </Form.Group>\r\n\r\n                <Button variant=\"primary w-50 mx-auto d-block \" type=\"submit\">\r\n                    Login\r\n                </Button>\r\n                <p className='text-danger'>{error?.message}</p>\r\n            </Form>\r\n            <p>New to Genius car? <Link to='/register' className='text-primary pe-auto text-decoration-none' onClick={navigateRegister}>Please Register</Link></p>\r\n            <p>Forget Password? <button to='' className='btn btn-link text-primary pe-auto text-decoration-none' onClick={resetPassword}>Reset Password</button></p>\r\n            <SocialLogin></SocialLogin>\r\n            <ToastContainer />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}